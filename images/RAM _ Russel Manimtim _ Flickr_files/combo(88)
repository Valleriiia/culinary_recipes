YUI.add("mobile-photo-well-view",(function(e,t){var o=require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create("mobile-photo-well-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.photoId=t.photoId,this.context=e.clone(t.context,!0);var o=this.appContext.getUA().os;if(this.nsid=t.nsid,this.disablePinchZooming="windows"===o,this.isAndroid="android"===o,this.context&&this.context.params&&this.context.params.isSharedEntity){var i=this.context.params;this.appContext.setGPCredentials({gp_code:i.gpCode,gp_owner:i.gpOwner,share_code:i.gpCode})}else this.appContext.setGPCredentials(null);return this},loadState:function(){var t=this,o=[];return o.push(this.appContext.getModel("photo-models",this.photoId).then((function(o){if(t.set("photoModel",o),o.getValue("isVideo"))return new e.Promise((function(t,o){e.use("flickr-video-player",(function(){t()}))}))}))),this.appContext.flipper.isFlipped("enable-nsfw-2024")&&(this.nsfwOverlayHelper=new e.NSFWHelper({appContext:this.appContext,viewerNsid:this.appContext.getViewer().nsid}),o.push(this.nsfwOverlayHelper.load())),e.Promise.all(o)},buildContainer:function(){var t,o,i,n,a,s,r=this.get("photoModel"),l=r.getValue("isVideo");if(YUI.Env.isServer)i=(t=500)/8,n=(o=500)/8;else{t=parseInt(e.StorageHelper.getItem("mobile-photo-well-width"),10),o=parseInt(e.StorageHelper.getItem("mobile-photo-well-height"),10);var h=this.getUsableAreaSize(),p=h.actualW,d=h.adjustedH;(!t||isNaN(t)||t<50)&&(t=p),(!o||isNaN(o)||o<50)&&(o=d),i=t,n=o}var g=r.getSizeToFit({width:i,height:n},{cropToFit:!0});this.set("bestImageSize",g),a=Math.max(g.height/3,o),s=g.height/g.width;const u=this.appContext.getViewer().signedIn?"wrongSetting":"signedOut";return this.setContainerWithTemplate("mobile-photo-well",{maxHeight:a,isServer:YUI.Env.isServer,loadAspect:s,loadHeight:s*t,url:g.url,isVideo:l,needsInterstitial:r.getValue("needsInterstitial"),isSignedIn:this.appContext.getViewer().signedIn,isMinor:this.appContext.getViewer().isMinor,nsfwOverlayConfig:{...this.appContext.flipper.isFlipped("enable-nsfw-2024")?e.NSFWHelper.getPhotoPageConfig(u):{},photoId:this.photoId}}),this},activate:function(){var t=this.get("container"),i=t.one(".main-image"),n=t.one(".main-image-wrapper"),a=this.get("photoModel"),s=this.get("photoModel").getValue("isVideo"),r=this;if(t.all(".photo-link.loading").removeClass("loading"),this.appContext.getViewer().signedIn&&this.appContext.getModel("person-preferences-models",this.appContext.auth.user.nsid).then((function(e){r.set("personPreferences",e),r.get("photoModel").getValue("needsInterstitial")&&!this.appContext.getViewer().isMinor&&(this.appContext.flipper.isFlipped("enable-nsfw-2024")&&r.get("container").one(".adult-content-photo-overlay .cta")?r.registerEventHandler(r.get("container").one(".adult-content-photo-overlay .cta").on("click",(()=>{r.nsfwOverlayHelper.updateSafetyLevel({safetyLevel:r.get("photoModel").getValue("safetyLevel"),photoModelRegistry:r.get("photoModel").registry,onSuccess:()=>{r.buildContainer(),r.activate()},onError:e=>{o.error({err:e}),r.onError(r.intlMessage({intlName:"photo-page-scrappy.COULDNT_UPDATE_SETTINGS"}))}})}))):r.get("container").one(".restricted-interstitial-message button")&&r.registerEventHandler(r.get("container").one(".restricted-interstitial-message button").on("click",r.handleInterstitialDismissButtonClick,r)))})),i&&(i.setStyle("width",null),n.setStyle("height",null)),this.findBestPhoto(a,i),this.appContext.getViewCounter().queue(this.get("photoModel").getValue("id"),this.appContext.getReferrer()),this.loadAdjacentPhotos(),n){var l=parseInt(n.getComputedStyle("height"),10);this.get("container").setStyle("height",l+"px"),this.appContext.flipper.isFlipped("enable-photo-page-lightbox-updates")?this.appContext.experiments.fullscreen.getMode()||(n.setStyle("position","absolute"),this.registerEventHandler(n.on("click",(()=>{this.appContext.flapp.navigate(this.getLightboxURL())})))):n.setStyle("position","absolute")}return!s||a.getValue("isVideoPending")||a.getValue("isVideoFailed")||(r.player=new e.FlickrVideoPlayer({container:t.one(".videoplayer"),model:a,appContext:r.appContext,videoNode:t.one("#video_1")?t.one("#video_1")._node:null}),r.player.init(),r.on("destroy",(function(){r.player&&(r.player.destroy(),r.player=null)}))),s||this.disablePinchZooming||!n||this.addPinchy(),window.orientation&&this.registerEventHandler(e.on("orientationchange",(function(e){var t=window.innerWidth,o=window.innerHeight,i=t>o,n=[[0,0],[i?o:t,i?t:o]];r.transform.updateBoundingBox(n),r.transform.updateImageSize()}))),this.context&&this.context.modelName&&this.context.params&&this.appContext.getModel(this.context.modelName,this.context.params).then((function(t){if(t)return r.set("contextModel",t),t.getValue("photoContextList").getContext({photoId:r.photoId}).then((function(){var o=-1,i=t.getValue("photoContextList").getList();if(i.some((function(e,t){return e.id===r.photoId&&(o=t),o>0})),o>-1){var n,a,s,l,h="/in/"+t.getValue("urlSuffix");o>0&&(n=i[o-1])&&(s=this.appContext.flipper.isFlipped("enable-photo-page-lightbox-updates")?e.URLHelper.getPhotoPage({photoId:n.getValue("id"),pathAlias:n.getValue("owner").getValue("pathAlias"),contextSuffix:r.get("contextModel").getValue("urlSuffix"),lightbox:r.appContext.experiments.fullscreen.getMode()}):n.getValue("url")+h),o<i.length-1&&(a=i[o+1])&&(l=this.appContext.flipper.isFlipped("enable-photo-page-lightbox-updates")?e.URLHelper.getPhotoPage({photoId:a.getValue("id"),pathAlias:a.getValue("owner").getValue("pathAlias"),contextSuffix:r.get("contextModel").getValue("urlSuffix"),lightbox:r.appContext.experiments.fullscreen.getMode()}):a.getValue("url")+h),s&&r.get("container").one(".prev-photo").setAttribute("href",s).removeClass("hide-nav-link"),l&&r.get("container").one(".next-photo").setAttribute("href",l).removeClass("hide-nav-link")}}))})),this},addPinchy:function(){var t,o=window.innerWidth,i=window.innerHeight,n=o>i,a=this.get("container").one(".main-image-wrapper"),s=this.get("container").one(".main-image-wrapper-underlay"),r=[[0,0],[n?i:o,n?o:i]],l=this;this.transform=e.MrPinchy.init({node:a,maxScale:n?2:3,minScale:1,boundingBox:r}),t=this.transform.getTouchHandler(),this.largeLoaded=!1,a.on("touchstart",(function(o){t(o),1!==o.touches.length&&(l.largeLoaded||(l.largeLoaded=!0,l.findBestPhoto(l.get("photoModel"),a.one(".img"),!0,!0)),l.addZoomTimeout=setTimeout((function(){l.get("container").addClass("zoomed"),a.addClass("zoomed"),e.one("html").setStyle("maxWidth","100%"),e.one("html").setStyle("position","fixed"),s.setStyle("display","block"),setTimeout((function(){s.addClass("show-overlay")}),10)}),200))})),a.on("touchmove",t),a.on("touchend",t),a.on("touchcancel",(function(e){l.transform.resetTransform(),l.transform.fire("mrpinchy:reset")})),this.transform.on("mrpinchy:reset",(function(){clearTimeout(l.addZoomTimeout),l.get("container").removeClass("zoomed"),a.removeClass("zoomed"),e.one("html").setStyle("maxWidth",null),e.one("html").setStyle("position",null),s.removeClass("show-overlay"),setTimeout((function(){s.setStyle("display","none")}),800)})),this.transform.on("mrpinchy:endpinch",(function(t){1===t&&(clearTimeout(l.addZoomTimeout),l.get("container").removeClass("zoomed"),a.removeClass("zoomed"),e.one("html").setStyle("maxWidth",null),e.one("html").setStyle("position",null),s.removeClass("show-overlay"),setTimeout((function(){s.setStyle("display","none")}),800))}))},getUsableAreaSize:function(){var e=window.innerWidth,t=window.innerHeight;return{actualW:e,actualH:t,adjustedH:t-50-50}},findBestPhoto:function(t,o,i,n){var a=this.getUsableAreaSize(),s=a.actualW,r=a.adjustedH,l=t.getSizeToFit({width:i?3*s:s,height:i?3*r:r},{cropToFit:!0});(r=Math.min(s/l.width*l.height,a.adjustedH),s=Math.min(r/l.height*l.width,a.actualW),o)?(o.getAttribute("src")!==l.url&&o.setAttribute("src",l.url),this.set("bestImageSize",l),o.setStyle("width",s),o.setStyle("height",r),this.get("container").setStyle("height",r),YUI.Env.isServer||(e.StorageHelper.setItem("mobile-photo-well-width",a.actualW),e.StorageHelper.setItem("mobile-photo-well-height",a.adjustedH))):(new Image).src=l.url},loadAdjacentPhotos:function(){var e=this.get("prevPhoto"),t=this.get("nextPhoto");t&&this.findBestPhoto(t),e&&this.findBestPhoto(e)},handleInterstitialDismissButtonClick:function(e){var t=this,i=this.get("personPreferences"),n=this.get("photoModel"),a=n.getValue("safetyLevel");i.setValue("safeSearch",a),i.registry.remoteUpdate(t.appContext.auth.user.nsid).then((function(e){n.registry.attributeSearch({needsInterstitial:!0}).forEach((function(e){n.registry.getValue(e,"safetyLevel")<=i.getValue("safeSearch")&&n.registry.setValue(e,"needsInterstitial",!1)})),t.buildContainer(),t.activate()}),(function(e){o.error({err:e}),t.onError(t.intlMessage({intlName:"photo-page-scrappy.COULDNT_UPDATE_SETTINGS"}))}))},getLightboxURL:function(){var t=this.get("photoModel"),o="";return this.get("contextModel")&&(o=this.get("contextModel").getValue("urlSuffix")),t?e.URLHelper.getPhotoPage({photoId:t.getValue("id"),pathAlias:t.getValue("owner").getValue("pathAlias"),contextSuffix:o,lightbox:!this.appContext.experiments.fullscreen.getMode()}):"#"}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-mobile-photo-well","hermes-template-adult-content-photo-overlay","viewport-data","storage-helper","mrpinchy","nsfw-helper"],optionalRequires:["hermes-core"],langBundles:["common","photo-page-scrappy","adult-content-overlay"]});YUI.add("hermes-template-sub-photo",(function(t,e){var n=t.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(t,e,n,l,o){var a=null!=e?e:t.nullContext||{},r=t.hooks.helperMissing,s=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="sub-photo-container centered-content">\n\t<div class="sub-photo-content-container">\n\t\t'+s((u(n,"outlet")||e&&u(e,"outlet")||r).call(a,null!=e?u(e,"sub-photo-left-view"):e,{name:"outlet",hash:{},data:o,loc:{start:{line:3,column:2},end:{line:3,column:32}}}))+"\n\t\t"+s((u(n,"outlet")||e&&u(e,"outlet")||r).call(a,null!=e?u(e,"sub-photo-right-view"):e,{name:"outlet",hash:{},data:o,loc:{start:{line:4,column:2},end:{line:4,column:33}}}))+"\n\t</div>\n\n\t\n\t"+s((u(n,"outlet")||e&&u(e,"outlet")||r).call(a,null!=e?u(e,"sub-photo-keyboard-shortcuts-view"):e,{name:"outlet",hash:{},data:o,loc:{start:{line:8,column:1},end:{line:8,column:45}}}))+"\n</div>\n"},useData:!0}),l={};t.Array.each([],(function(e){var n=t.Template.get("hermes/"+e);n&&(l[e]=n)})),t.Template.register("hermes/sub-photo",(function(e,o){return(o=o||{}).partials=o.partials?t.merge(l,o.partials):l,n(e,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-sub-photo-left",(function(e,l){var n=e.Template.Handlebars.revive({1:function(e,l,n,t,o){var a=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return"\t"+e.escapeExpression((a(n,"outlet")||l&&a(l,"outlet")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},null!=l?a(l,"sub-photo-submoola-banner-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:2,column:1},end:{line:2,column:42}}}))+"\n"},3:function(e,l,n,t,o){var a=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return"\t"+e.escapeExpression((a(n,"outlet")||l&&a(l,"outlet")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},null!=l?a(l,"sub-photo-submoola-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:7,column:1},end:{line:7,column:35}}}))+"\n"},5:function(e,l,n,t,o){var a=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return"\t"+e.escapeExpression((a(n,"outlet")||l&&a(l,"outlet")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},null!=l?a(l,"comment-count-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:10,column:1},end:{line:10,column:30}}}))+"\n"},7:function(e,l,n,t,o){var a=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return"\t"+e.escapeExpression((a(n,"outlet")||l&&a(l,"outlet")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},null!=l?a(l,"sub-photo-liked-by-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:14,column:1},end:{line:14,column:35}}}))+"\n"},9:function(e,l,n,t,o){var a=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return"\t"+e.escapeExpression((a(n,"outlet")||l&&a(l,"outlet")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},null!=l?a(l,"sub-photo-fave-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:16,column:1},end:{line:16,column:31}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,l,n,t,o){var a,r=null!=l?l:e.nullContext||{},u=e.hooks.helperMissing,s=e.escapeExpression,i=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return(null!=(a=i(n,"if").call(r,null!=l?i(l,"showBannerAd"):l,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))?a:"")+s((i(n,"outlet")||l&&i(l,"outlet")||u).call(r,null!=l?i(l,"attribution-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:4,column:0},end:{line:4,column:27}}}))+"\n"+s((i(n,"outlet")||l&&i(l,"outlet")||u).call(r,null!=l?i(l,"sub-photo-title-desc-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:5,column:0},end:{line:5,column:36}}}))+"\n"+(null!=(a=i(n,"unless").call(r,null!=l?i(l,"showBannerAd"):l,{name:"unless",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:0},end:{line:8,column:11}}}))?a:"")+(null!=(a=i(n,"if").call(r,null!=l?i(l,"shouldSeeSidebar"):l,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:9,column:0},end:{line:11,column:7}}}))?a:"")+s((i(n,"outlet")||l&&i(l,"outlet")||u).call(r,null!=l?i(l,"gift-pro-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:12,column:0},end:{line:12,column:24}}}))+"\n"+(null!=(a=(i(n,"isFlipped")||l&&i(l,"isFlipped")||u).call(r,"enable-likes",{name:"isFlipped",hash:{},fn:e.program(7,o,0),inverse:e.program(9,o,0),data:o,loc:{start:{line:13,column:0},end:{line:17,column:14}}}))?a:"")+'\n<div class="photo-comments-container"></div>\n'+(null!=(a=i(n,"if").call(r,null!=l?i(l,"showBannerAd"):l,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:20,column:0},end:{line:22,column:7}}}))?a:"")},useData:!0}),t={};e.Array.each([],(function(l){var n=e.Template.get("hermes/"+l);n&&(t[l]=n)})),e.Template.register("hermes/sub-photo-left",(function(l,o){return(o=o||{}).partials=o.partials?e.merge(t,o.partials):t,n(l,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-sub-photo-submoola",(function(e,n){var a=e.Template.Handlebars.revive({1:function(e,n,a,o,l){var t,r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="photo-page-m-container '+(null!=(t=(r(a,"isFlipped")||n&&r(n,"isFlipped")||e.hooks.helperMissing).call(null!=n?n:e.nullContext||{},"enable-mobile-photo-banner-ad",{name:"isFlipped",hash:{},fn:e.program(2,l,0),inverse:e.noop,data:l,loc:{start:{line:2,column:35},end:{line:2,column:112}}}))?t:"")+'">\n'+(null!=(t=e.invokePartial(r(o,"prbd-moola-position"),n,{name:"prbd-moola-position",hash:{upgradeProLink:null!=n?r(n,"upgradeProLink"):n,advertisingStitching:null!=n?r(n,"advertisingStitching"):n,upsellFallback:!1,adUnit:null!=n?r(n,"adUnit"):n},data:l,indent:"\t",helpers:a,partials:o,decorators:e.decorators}))?t:"")+"</div>\n"},2:function(e,n,a,o,l){return"banner-ad-enabled"},compiler:[8,">= 4.3.0"],main:function(e,n,a,o,l){var t,r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return null!=(t=r(a,"if").call(null!=n?n:e.nullContext||{},null!=n?r(n,"showPhotoPageAd"):n,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))?t:""},usePartial:!0,useData:!0}),o={};e.Array.each(["prbd-moola-position"],(function(n){var a=e.Template.get("hermes/"+n);a&&(o[n]=a)})),e.Template.register("hermes/sub-photo-submoola",(function(n,l){return(l=l||{}).partials=l.partials?e.merge(o,l.partials):o,a(n,l)}))}),"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-prbd-moola-position"]});YUI.add("sub-photo-submoola-view",(function(t){let i=new t.SubscriptionsHelper;t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(i){return this.nsid=i.nsid,this.photoId=i.photoId,this.isOwner=i.isOwner,this.showPhotoPageAd=!0,this.ad=t.config.flickr.moola.positions.photopage[2],this.adSlots=[],this.disableLazyLoading=!this.appContext.flipper.isFlipped("enable-mobile-photo-banner-ad"),this.adInView=!1,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){let t=this;return this.appContext.getModel("photo-models",t.photoId).then(function(i){t.set("photo",i),this.appContext.adManager.canShowAdWithPhoto(t.get("photo"))||(this.showPhotoPageAd=!1)}.bind(this))},buildContainer:function(){return this.disableLazyLoading&&this.renderAdContainer(),this},activate:function(){return this.showPhotoPageAd&&this.registerEventHandler(t.on("photoPage:dataLayerReadyForAds",function(){this.appContext.flipper.isFlipped("enable-mobile-photo-banner-ad")||this.requestAd()}.bind(this))),this},requestAd:function(){this.appContext.adManager.processAdsOnPage(),this.appContext.adManager.signalAdRequest(this)},renderAdContainer:function(){let e,n,o,a=this.get("container");!this.disableLazyLoading&&this.adInView||a&&(n=this.appContext.viewportData.getWidth(),o=t.config.flickr.moola.ad_breakpoint_mobile_desktop,e={showPhotoPageAd:this.showPhotoPageAd,adUnit:this.ad[n<o?"ad_unit_mobile":"ad_unit_desktop"],advertisingStitching:this.adEventStitch,upgradeProLink:i.getProLandingPageUrl(i.UTM_HIDE_ADS)},this.adUnit=e.adUnit,this.adEventStitch=this.appContext.adManager.getHashedAdValue(this.appContext.adManager.getAdPositioning(a)),this.adInView=!0,this.setContainerWithTemplate("sub-photo-submoola",e),YUI.Env.isServer||this.requestAd())}})}),"@VERSION@",{requires:["flickr-view","hermes-template-sub-photo-submoola","url-helper","subscriptions-helper"],langBundles:["common"]});YUI.add("hermes-template-sub-photo-submoola-banner",(function(a,e){var r=a.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(a,e,r,t,n){var o,i=a.lookupProperty||function(a,e){if(Object.prototype.hasOwnProperty.call(a,e))return a[e]};return'<div class="submoola-banner-container">\n'+(null!=(o=a.invokePartial(i(t,"prbd-moola-position"),e,{name:"prbd-moola-position",hash:{upgradeProLink:null!=e?i(e,"upgradeProLink"):e,advertisingStitching:null!=e?i(e,"advertisingStitching"):e,upsellFallback:!1,adUnit:null!=e?i(e,"adUnit"):e},data:n,indent:"\t",helpers:r,partials:t,decorators:a.decorators}))?o:"")+"</div>\n"},usePartial:!0,useData:!0}),t={};a.Array.each(["prbd-moola-position"],(function(e){var r=a.Template.get("hermes/"+e);r&&(t[e]=r)})),a.Template.register("hermes/sub-photo-submoola-banner",(function(e,n){return(n=n||{}).partials=n.partials?a.merge(t,n.partials):t,r(e,n)}))}),"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-prbd-moola-position"]});YUI.add("sub-photo-submoola-banner-view",(function(t){var i=new t.SubscriptionsHelper;t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(i){return this.nsid=i.nsid,this.photoId=i.photoId,this.isOwner=i.isOwner,this.showPhotoPageAd=!0,this.ad=t.config.flickr.moola.positions.photopage[3],this.adSlots=[],""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){var t=this;return this.appContext.getModel("photo-models",t.photoId).then(function(i){t.set("photo",i),this.appContext.adManager.canShowAdWithPhoto(t.get("photo"))||(this.showPhotoPageAd=!1)}.bind(this))},buildContainer:function(){let t;return this.showPhotoPageAd&&(t={showPhotoPageAd:this.showPhotoPageAd,adUnit:this.ad.ad_unit_mobile,advertisingStitching:this.adEventStitch,upgradeProLink:i.getProLandingPageUrl(i.UTM_HIDE_ADS)},this.adUnit=t.adUnit,this.adEventStitch=this.appContext.adManager.getHashedAdValue(this.appContext.adManager.getAdPositioning(this.get("container"))),this.setContainerWithTemplate("sub-photo-submoola-banner",t)),this},activate:function(){return this.showPhotoPageAd&&(this.appContext.adManager.processAdsOnPage(),this.appContext.adManager.signalAdRequest(this)),this}})}),"@VERSION@",{requires:["flickr-view","hermes-template-sub-photo-submoola-banner","url-helper","subscriptions-helper"],langBundles:["common"]});